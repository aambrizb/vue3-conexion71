(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".div-items[data-v-cff9e84f]{max-height:150px;overflow:auto;position:absolute;top:35px;left:0;background-color:#fff;border:solid 1px #c4c4c4;border-radius:10px;z-index:999999;width:100%}.items[data-v-cff9e84f]{list-style:none;margin:0;padding:10px}.item[data-v-cff9e84f]{cursor:pointer}.selected[data-v-cff9e84f]{background-color:#f2f2f2;font-weight:700}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
(function(d,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(d=typeof globalThis<"u"?globalThis:d||self,e(d["vue3-conexion71"]={},d.Vue))})(this,function(d,e){"use strict";const V=(i,k)=>{const p=i.__vccOpts||i;for(const[t,h]of k)p[t]=h;return p},N={class:"row"},b=["id","name"],C={class:"col-lg-1 col-md-1 col-sm-12 col-xs-12 fw-bold"},w={style:{position:"relative"}},B={key:0,class:"div-items"},S={class:"items"},T=["onClick","onMouseover"],M={class:"col-lg-1 col-md-1 col-sm-12 col-xs-12"},F=["data-app","data-model","data-form_class"],O=["data-form_class"],D={key:0,class:"row"},I={class:"col-lg-11 col-md-11 col-sm-12 col-xs-12"},J={style:{"font-size":"12px",color:"gray"}},$=V({__name:"SelectFrame",props:["name","label","app","method","label_field","id_field","help_text","show_create","show_edit","form_class","pk"],emits:["changed"],setup(i,{expose:k,emit:p}){const t=i,h=p;k({setPK:z});const _=e.ref(null),v=e.ref(null),r=e.ref(null),f=e.ref([]),s=e.ref([]),n=e.ref(null),u=e.ref(null),m=e.ref(!1),c=e.ref(null);e.onMounted(()=>{t.name===void 0||t.app===void 0||t.method===void 0||t.label_field===void 0||(t.pk!==void 0&&(c.value=t.pk),document.addEventListener("created_edited",function(l){l.detail.base_app===_.value&&l.detail.base_model===v.value&&(removeModal("base","CreateEdit"),c.value=l.detail.pk,y())}),y())}),e.watch(r,(l,o)=>{s.value=f.value.filter(a=>a[t.label_field].includes(r.value)),m.value=!0});function z(l){c.value=l,y()}const y=()=>{HttpRequest("GET",t.app,t.method).then(function(l){_.value=l.app,v.value=l.model,f.value=l.data,s.value=f.value,c.value!==void 0&&c.value!==null&&setTimeout(function(){let o=f.value.findIndex(a=>String(a.id)===String(c.value));o!==-1&&(u.value=f.value[o],r.value=f.value[o][t.label_field],setTimeout(function(){m.value=!1},50))},50)})},j=l=>{if(l.keyCode===38||l.keyCode===40){if(n.value===void 0||n.value===null){n.value=0,E(n.value);return}l.keyCode===40&&n.value<s.value.length-1&&(n.value+=1),l.keyCode===38&&n.value>0&&(n.value-=1),E(n.value)}else l.keyCode===13?g(n.value):l.keyCode===27&&(m.value=!1)},g=l=>{r.value=s.value[l][t.label_field],u.value=s.value[l],c.value=u.value.id,h("changed",u.value),setTimeout(function(){m.value=!1},50)},E=l=>{n.value=l,!(s.value.length===0||s.value[l]===void 0)&&(s.value.forEach(o=>o.class_item=null),s.value[l].class_item="selected")},q=()=>{showModal("base","CreateEdit",{base_app:_.value,base_model:v.value,pk:u.value.id})},K=l=>{setTimeout(function(){m.value=!1,(u.value===null||u.value===void 0)&&(r.value=null)},100)};return(l,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",N,[e.withDirectives(e.createElementVNode("input",{id:"id_"+t.name,type:"hidden",name:t.name,"onUpdate:modelValue":o[0]||(o[0]=a=>c.value=a)},null,8,b),[[e.vModelText,c.value]]),e.createElementVNode("div",C,e.toDisplayString(t.label),1),e.createElementVNode("div",{class:e.normalizeClass(JSON.parse(i.show_create)||JSON.parse(i.show_edit)?"col-lg-9 col-md-9 col-sm-9 col-xs-12":"col-lg-10 col-md-10 col-sm-10 col-xs-12")},[e.createElementVNode("div",w,[e.withDirectives(e.createElementVNode("input",{type:"text",class:"form-control",onFocus:o[1]||(o[1]=a=>m.value=!0),onBlur:K,onKeyup:j,"onUpdate:modelValue":o[2]||(o[2]=a=>r.value=a)},null,544),[[e.vModelText,r.value]]),m.value?(e.openBlock(),e.createElementBlock("div",B,[e.createElementVNode("ul",S,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,(a,x)=>(e.openBlock(),e.createElementBlock("li",{class:e.normalizeClass(["item",a.class_item]),onClick:L=>{g(x)},onMouseover:L=>{E(x)}},e.toDisplayString(a[t.label_field]),43,T))),256))])])):e.createCommentVNode("",!0)])],2),e.createElementVNode("div",M,[JSON.parse(t.show_create)?(e.openBlock(),e.createElementBlock("span",{key:0,class:"fa fa-plus-circle text-primary m-1 core_create_edit","data-app":_.value,"data-model":v.value,"data-form_class":t.form_class,style:{cursor:"pointer"}},null,8,F)):e.createCommentVNode("",!0),JSON.parse(t.show_edit)?(e.openBlock(),e.createElementBlock("span",{key:1,class:"fa fa-edit text-success m-1 core_create_edit","data-form_class":t.form_class,onClick:o[3]||(o[3]=a=>q()),style:{cursor:"pointer"}},null,8,O)):e.createCommentVNode("",!0)])]),t.help_text?(e.openBlock(),e.createElementBlock("div",D,[o[4]||(o[4]=e.createElementVNode("div",{class:"col-lg-1 col-md-1 col-sm-12 col-xs-12"},null,-1)),e.createElementVNode("div",I,[e.createElementVNode("i",J,e.toDisplayString(i.help_text),1)])])):e.createCommentVNode("",!0)],64))}},[["__scopeId","data-v-cff9e84f"]]);d.SelectFrame=$,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
