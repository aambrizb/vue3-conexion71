(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".div-items[data-v-4bb54f3e]{max-height:150px;overflow:auto;position:absolute;top:35px;left:0;background-color:#fff;border:solid 1px #c4c4c4;border-radius:10px;z-index:999999;width:100%}.items[data-v-4bb54f3e]{list-style:none;margin:0;padding:10px}.item[data-v-4bb54f3e]{cursor:pointer}.selected[data-v-4bb54f3e]{background-color:#f2f2f2;font-weight:700}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
(function(d,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(d=typeof globalThis<"u"?globalThis:d||self,e(d.conexion71={},d.Vue))})(this,function(d,e){"use strict";const x=(m,k)=>{const p=m.__vccOpts||m;for(const[t,h]of k)p[t]=h;return p},V={class:"row"},N=["id","name"],C={class:"col-lg-1 col-md-1 col-sm-1 col-xs-12 fw-bold"},B={style:{position:"relative"}},w={key:0,class:"div-items"},S={class:"items"},T=["onClick","onMouseover"],M={key:0,class:"col-lg-1 col-md-1 col-sm-1 col-xs-12"},F=["data-app","data-model"],D={key:0,class:"row"},I={class:"col-lg-11 col-md-11 col-sm-11 col-xs-12"},O={style:{"font-size":"12px",color:"gray"}},$=x({__name:"SelectFrame",props:["name","label","app","method","label_field","id_field","help_text","show_actions","pk"],emits:["changed"],setup(m,{expose:k,emit:p}){const t=m,h=p;k({setPK:z});const _=e.ref(null),v=e.ref(null),c=e.ref(null),f=e.ref([]),s=e.ref([]),a=e.ref(null),r=e.ref(null),u=e.ref(!1),i=e.ref(null);e.onMounted(()=>{t.name===void 0||t.app===void 0||t.method===void 0||t.label_field===void 0||(t.pk!==void 0&&(i.value=t.pk),document.addEventListener("created_edited",function(l){l.detail.base_app===_.value&&l.detail.base_model===v.value&&(removeModal("base","CreateEdit"),i.value=l.detail.pk,y())}),y())}),e.watch(c,(l,o)=>{s.value=f.value.filter(n=>n[t.label_field].includes(c.value)),u.value=!0});function z(l){i.value=l,y()}const y=()=>{HttpRequest("GET",t.app,t.method).then(function(l){_.value=l.app,v.value=l.model,f.value=l.data,s.value=f.value,i.value!==void 0&&i.value!==null&&setTimeout(function(){let o=f.value.findIndex(n=>String(n.id)===String(i.value));o!==-1&&(r.value=f.value[o],c.value=f.value[o][t.label_field],setTimeout(function(){u.value=!1},50))},50)})},j=l=>{if(l.keyCode===38||l.keyCode===40){if(a.value===void 0||a.value===null){a.value=0,E(a.value);return}l.keyCode===40&&a.value<s.value.length-1&&(a.value+=1),l.keyCode===38&&a.value>0&&(a.value-=1),E(a.value)}else l.keyCode===13?b(a.value):l.keyCode===27&&(u.value=!1)},b=l=>{c.value=s.value[l][t.label_field],r.value=s.value[l],i.value=r.value.id,h("changed",r.value),setTimeout(function(){u.value=!1},50)},E=l=>{a.value=l,!(s.value.length===0||s.value[l]===void 0)&&(s.value.forEach(o=>o.class_item=null),s.value[l].class_item="selected")},q=()=>{showModal("base","CreateEdit",{base_app:_.value,base_model:v.value,pk:r.value.id})},J=l=>{setTimeout(function(){u.value=!1,(r.value===null||r.value===void 0)&&(c.value=null)},100)};return(l,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",V,[e.withDirectives(e.createElementVNode("input",{id:"id_"+t.name,type:"hidden",name:t.name,"onUpdate:modelValue":o[0]||(o[0]=n=>i.value=n)},null,8,N),[[e.vModelText,i.value]]),e.createElementVNode("div",C,e.toDisplayString(t.label),1),e.createElementVNode("div",{class:e.normalizeClass(JSON.parse(m.show_actions)?"col-lg-9 col-md-9 col-sm-9 col-xs-12":"col-lg-10 col-md-10 col-sm-10 col-xs-12")},[e.createElementVNode("div",B,[e.withDirectives(e.createElementVNode("input",{type:"text",class:"form-control",onFocus:o[1]||(o[1]=n=>u.value=!0),onBlur:J,onKeyup:j,"onUpdate:modelValue":o[2]||(o[2]=n=>c.value=n)},null,544),[[e.vModelText,c.value]]),u.value?(e.openBlock(),e.createElementBlock("div",w,[e.createElementVNode("ul",S,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,(n,g)=>(e.openBlock(),e.createElementBlock("li",{class:e.normalizeClass(["item",n.class_item]),onClick:K=>{b(g)},onMouseover:K=>{E(g)}},e.toDisplayString(n[t.label_field]),43,T))),256))])])):e.createCommentVNode("",!0)])],2),JSON.parse(t.show_actions)?(e.openBlock(),e.createElementBlock("div",M,[e.createElementVNode("span",{class:"fa fa-plus-circle text-primary m-1 core_create_edit","data-app":_.value,"data-model":v.value,style:{cursor:"pointer"}},null,8,F),e.createElementVNode("span",{class:"fa fa-edit text-success m-1 core_create_edit",onClick:o[3]||(o[3]=n=>q()),style:{cursor:"pointer"}})])):e.createCommentVNode("",!0)]),t.help_text?(e.openBlock(),e.createElementBlock("div",D,[o[4]||(o[4]=e.createElementVNode("div",{class:"col-lg-1 col-md-1 col-sm-1 col-xs-12"},null,-1)),e.createElementVNode("div",I,[e.createElementVNode("i",O,e.toDisplayString(m.help_text),1)])])):e.createCommentVNode("",!0)],64))}},[["__scopeId","data-v-4bb54f3e"]]);d.SelectFrame=$,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});
